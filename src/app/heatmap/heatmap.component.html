<!-- Heatmap de contrÃ´le -->
<div class="board-container">
  <div class="board-wrapper">
    <div class="board-header">
      <h3>ðŸ”¥ Heatmap de ContrÃ´le</h3>
    </div>

    <div class="board-with-ranks">
      <!-- CoordonnÃ©es de gauche (chiffres) -->
      <div class="coordinates-left">
        <div class="coord-number">8</div>
        <div class="coord-number">7</div>
        <div class="coord-number">6</div>
        <div class="coord-number">5</div>
        <div class="coord-number">4</div>
        <div class="coord-number">3</div>
        <div class="coord-number">2</div>
        <div class="coord-number">1</div>
      </div>

      <!-- Ã‰chiquier heatmap -->
      <div class="board">
        @for (square of board(); track square.square) {
        <div
          class="square"
          [class.light]="square.isLight"
          [class.dark]="!square.isLight"
          [class.has-piece]="square.piece"
          [style]="getSquareControlStyle(square.control)"
          [title]="getSquareTooltip(square)"
        >
          <!-- PiÃ¨ce (semi-transparente pour voir la heatmap) -->
          @if (square.piece) {
          <span
            class="piece heatmap-piece"
            [class.white]="square.piece.color === 'w'"
            [class.black]="square.piece.color === 'b'"
          >
            {{ getPieceSymbol(square.piece) }}
          </span>
          }

          <!-- Indicateur de contrÃ´le (toujours visible) -->
          <div class="control-indicator visible">
            @if (square.control.whiteControl > 0 || square.control.blackControl
            > 0) {
            <span
              class="control-value"
              [class.white-dominance]="square.control.netControl > 0"
              [class.black-dominance]="square.control.netControl < 0"
              [class.contested]="
                square.control.netControl === 0 &&
                square.control.whiteControl > 0
              "
            >
              {{ square.control.whiteControl }}:{{
                square.control.blackControl
              }}
            </span>
            }
          </div>
        </div>
        }
      </div>
    </div>

    <!-- CoordonnÃ©es du bas (lettres) -->
    <div class="coordinates-bottom">
      <div class="coord-letter">a</div>
      <div class="coord-letter">b</div>
      <div class="coord-letter">c</div>
      <div class="coord-letter">d</div>
      <div class="coord-letter">e</div>
      <div class="coord-letter">f</div>
      <div class="coord-letter">g</div>
      <div class="coord-letter">h</div>
    </div>
  </div>
</div>
