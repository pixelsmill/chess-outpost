<div class="chess-app">
  <!-- En-tÃªte avec contrÃ´les -->
  <div class="header">
    <h1>
      <span>Red</span><span class="letter-spacing-small">P</span
      ><span class="red-pawn">â™Ÿ</span>wn
    </h1>
  </div>

  <!-- Conteneur des Ã©chiquiers cÃ´te Ã  cÃ´te -->
  <div class="boards-container">
    <!-- Ã‰chiquier de jeu -->
    <app-echiquier
      [externalPosition]="currentPosition()"
      [disableClicks]="isNavigationMode()"
      (positionChange)="onPositionChange($event)"
    >
    </app-echiquier>

    <!-- Heatmap de contrÃ´le -->
    <app-heatmap [position]="currentPosition()"></app-heatmap>

    <!-- Carte topographique -->
    <app-topographic [position]="currentPosition()"></app-topographic>
  </div>

  <!-- Conteneur des contrÃ´les -->
  <div class="controls">
    <div class="game-status">
      <h2 [class.checkmate]="isGameOver" [class.check]="isCheck">
        {{ gameStatus }}
      </h2>
    </div>

    <button (click)="resetGame()" class="reset-btn">ğŸ”„ Nouvelle partie</button>

    <button (click)="togglePgnInput()" class="pgn-btn">
      ğŸ“‹ {{ showPgnInput ? "Masquer PGN" : "Charger PGN" }}
    </button>
  </div>

  <!-- Interface de chargement PGN -->
  @if (showPgnInput) {
  <div class="pgn-input-container">
    <h3>ğŸ“‹ Charger une partie PGN</h3>
    <textarea
      [(ngModel)]="pgnText"
      placeholder="Collez votre PGN ici...&#10;&#10;Exemple:&#10;1. e4 e5 2. Nf3 Nc6 3. Bb5 a6"
      class="pgn-textarea"
      rows="6"
    >
    </textarea>
    <div class="pgn-actions">
      <button (click)="loadPgn()" class="load-btn">âœ… Charger la partie</button>
      <button (click)="togglePgnInput()" class="cancel-btn">âŒ Annuler</button>
    </div>
  </div>
  }

  <!-- ContrÃ´les de navigation -->
  @if (isNavigationMode()) {
  <div class="navigation-controls">
    <h3>ğŸ® Navigation dans la partie</h3>
    <div class="move-info">
      {{ getCurrentMoveDisplay() }}
    </div>
    <div class="nav-buttons">
      <button
        (click)="goToStart()"
        [disabled]="!canGoBack"
        class="nav-btn"
        title="Aller au dÃ©but"
      >
        â®ï¸
      </button>
      <button
        (click)="goToPrevious()"
        [disabled]="!canGoBack"
        class="nav-btn"
        title="Coup prÃ©cÃ©dent"
      >
        âª
      </button>
      <button
        (click)="goToNext()"
        [disabled]="!canGoForward"
        class="nav-btn"
        title="Coup suivant"
      >
        â©
      </button>
      <button
        (click)="goToEnd()"
        [disabled]="!canGoForward"
        class="nav-btn"
        title="Aller Ã  la fin"
      >
        â­ï¸
      </button>
    </div>
  </div>
  }
</div>
