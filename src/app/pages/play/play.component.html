<div class="play-content">
  <!-- Boutons de sélection du background -->
  <div class="background-selector">
    <button
      class="bg-btn"
      [class.active]="selectedBackground() === 'classic'"
      (click)="setBackground('classic')"
    >
      Échiquier Classique
    </button>
    <button
      class="bg-btn"
      [class.active]="selectedBackground() === 'heatmap'"
      (click)="setBackground('heatmap')"
    >
      Contrôle Territorial
    </button>
    <button
      class="bg-btn"
      [class.active]="selectedBackground() === 'topographic'"
      (click)="setBackground('topographic')"
    >
      Vue Topographique
    </button>
  </div>

  <!-- Échiquier unique avec background dynamique -->
  <div class="board-container">
    <app-board-wrapper>
      <!-- Background classique -->
      @if (selectedBackground() === 'classic') {
      <app-classic-board [position]="currentPosition()"></app-classic-board>
      }

      <!-- Background heatmap -->
      @if (selectedBackground() === 'heatmap') {
      <app-heatmap-board [position]="currentPosition()"></app-heatmap-board>
      }

      <!-- Background topographique -->
      @if (selectedBackground() === 'topographic') {
      <app-topographic-board
        [position]="currentPosition()"
      ></app-topographic-board>
      }

      <!-- Grille de pièces par-dessus -->
      <app-echiquier
        [externalPosition]="currentPosition()"
        [disableClicks]="false"
        (positionChange)="onPositionChange($event)"
      ></app-echiquier>
    </app-board-wrapper>
  </div>

  <!-- Contrôles en bas -->
  <div class="game-status-section">
    <h2 [class.checkmate]="isGameOver" [class.check]="isCheck">
      {{ gameStatus }}
    </h2>
    <button (click)="resetGame()" class="reset-btn">Reset</button>
  </div>
</div>
